(function(a){a.fn.carousel=function(c){var d={mode:"horizontal",fadeDuration:300,transitionDuration:700,step:300,opacity:0.5,circular:false,auto:false,delay:3000,center:false};var b=a.extend(d,c);return this.each(function(){var f=a(this),l=f.children("div.topButton"),k=f.children("div.botomButton"),j=f.children("div.scroll"),m=j.children("ul"),o=m.children("li"),h=m.children("li.current"),p=0,n=0,i=null;o.each(function(){p+=(b.mode=="horizontal")?a(this).outerWidth():a(this).outerHeight()});if(b.mode=="horizontal"){m.width(p)}else{m.height(p)}var q=(b.mode=="horizontal")?m.outerWidth()-j.outerWidth():m.outerHeight()-j.outerHeight();o.hover(function(){i&&clearInterval(i);a(this).siblings(":not(.current)").stop().fadeTo(b.fadeDuration,b.opacity)},function(){i=e();a(this).siblings().stop().fadeTo(b.fadeDuration,1)});var g=function(s){if(typeof s=="number"){j.stop().scrollTo(s,b.transitionDuration)}else{if(typeof s=="object"){var r;if(b.mode=="horizontal"){r=s.position().left-m.position().left;r-=(j.outerWidth()-s.outerWidth())/2}else{r=s.position().top-m.position().top;r-=(j.outerHeight()-s.outerHeight())/2}if(r<0){r=0}j.stop().scrollTo(r,b.transitionDuration);n=r}}if(!b.circular){l.toggleClass("disabled",n<=0);k.toggleClass("disabled",n>=q)}},e=function(){if(!b.auto){return null}return setInterval(function(){if(n==q){n=0}else{n+=b.step;if(n>q){n=q}}g(n)},b.delay)};l.click(function(){if(b.circular&&n==0){n=q}else{n-=b.step;if(n<0){n=0}}g(n)});k.click(function(){if(b.circular&&n==q){n=0}else{n+=b.step;if(n>q){n=q}}g(n)});i=e();if(h.length){g(h)}else{if(b.center){o.click(function(){var r=a(this);r.siblings().removeClass("current");r.addClass("current");g(r)})}}})}})(jQuery);